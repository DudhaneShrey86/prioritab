var dateFormat="YYYY-MM-DD",timeFormat="HH:mm A",showCompletionPercent=!1;function GetTime(){var o=moment().format(window.timeFormat);document.getElementById("clockbox").innerHTML=o}function GetDate(){var o=moment().format("dddd"),e=moment().format(window.dateFormat);document.getElementById("daybox").innerHTML=o,document.getElementById("datebox").innerHTML=e}function CheckDayCountdown(){$("#workday-checkbox").is(":checked")?(chrome.storage.sync.set({"user-use-workday":"true"}),CountdownWorkday()):(chrome.storage.sync.set({"user-use-workday":"false"}),CountdownDay())}function CountdownDay(){var o=new Date,e=new Date(o.getFullYear(),o.getMonth(),o.getDate());$("#countdown-day .countdown-label").replaceWith("<div class='countdown-label'>...of the day</div>"),document.getElementById("countdown-day-amount").innerHTML=Math.round((o-e)/864e5*100)+"%"}function CountdownWorkday(){var o,e,t,r,n,i,s;chrome.storage.sync.get(["user-workday-start","user-workday-end"],function(l){o=l["user-workday-start"]?l["user-workday-start"]:"09:00",e=l["user-workday-end"]?l["user-workday-end"]:"18:00",t=o.split(":")[0],r=o.split(":")[1],n=e.split(":")[0],i=e.split(":")[1];var c=new Date,a=new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(t),parseInt(r)),d=new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(n),parseInt(i)),u=Math.round(s=c<a?0:c>d?100:(c-a)/(d-a)*100);$("#countdown-day .countdown-label").replaceWith("<div class='countdown-label'>...of the workday</div>"),document.getElementById("countdown-day-amount").innerHTML=u+"%"})}function CountdownMonthYear(){var o=new Date,e=new Date(o.getFullYear(),o.getMonth(),1),t=864e5*moment().daysInMonth(),r=new Date(o.getFullYear(),0,1);document.getElementById("countdown-month-amount").innerHTML=Math.round((o-e)/t*100)+"%",document.getElementById("countdown-year-amount").innerHTML=Math.floor((o-r)/31536e6*100)+"%",setTimeout(CountdownMonthYear,1e3)}function SetColorProperty(o,e,t){var r=$("<style>."+o+" { "+e+": "+t+"; }</style>");$("html > head").append(r)}function SetColors(){chrome.storage.sync.get("user-background-color",function(o){SetColorProperty("main-bgcolor","background-color",o["user-background-color"]?o["user-background-color"]:"#222222")}),chrome.storage.sync.get("user-font-color",function(o){var e=o["user-font-color"]?o["user-font-color"]:"white";SetColorProperty("main-font-color","color",e),SetColorProperty("main-border-color","color",e)}),chrome.storage.sync.get("user-shadow-color",function(o){var e=o["user-shadow-color"]?o["user-shadow-color"]:"rgba(255, 255, 255, 0.3)";SetColorProperty("shadow-color","color",e),SetColorProperty("shadow-border-color","color",e)})}function SetDateTimeFormat(){chrome.storage.sync.get({"user-date-format":"MMM D, YYYY"},function(o){dateFormat=o["user-date-format"],GetDate(),$("#date-format-input").val(dateFormat)}),chrome.storage.sync.get({"user-time-format":"h:mm:ss A"},function(o){timeFormat=o["user-time-format"],GetTime(),$("#time-format-input").val(timeFormat)})}function calculatePercent(o){var e=$("#shown-items-"+o+" li").length,t=$("#shown-items-"+o+" li.shadow-color").length;e>0?$("#completion-"+o+"-amount").text(Math.round(100*t/e)+"%"):$("#completion-"+o+"-amount").text("0%")}function CalculatePercentages(){calculatePercent("left"),calculatePercent("mid"),calculatePercent("right")}function ToggleCompletionElements(){showCompletionPercent?($("#countdownbox").hide(),$("#completionbox").show(),$("#completion-toggle-icon").removeClass("fa-toggle-off").addClass("fa-toggle-on")):($("#completionbox").hide(),$("#countdownbox").show(),$("#completion-toggle-icon").removeClass("fa-toggle-on").addClass("fa-toggle-off"))}$(document).click(function(o){!$(o.target).closest("#customize-corner").length&&$("#customize-corner").is(":visible")&&($("#customize-selectors").hide(),$("#customize-button").fadeIn()),!$(o.target).closest("#list-left").length&&$("#list-left .edit-priorities").is(":visible")&&($("#list-left .edit-priorities").hide(),$("#list-left .edit-priorities-link").show()),!$(o.target).closest("#list-mid").length&&$("#list-mid .edit-priorities").is(":visible")&&($("#list-mid .edit-priorities").hide(),$("#list-mid .edit-priorities-link").show()),!$(o.target).closest("#list-right").length&&$("#list-right .edit-priorities").is(":visible")&&($("#list-right .edit-priorities").hide(),$("#list-right .edit-priorities-link").show())}),window.onload=function(){SetDateTimeFormat(),setTimeout(()=>{CalculatePercentages()},100),chrome.storage.sync.get({"completion-toggle":!1},function(o){showCompletionPercent=o["completion-toggle"],ToggleCompletionElements()}),chrome.storage.sync.get("user-use-workday",function(o){"true"===o["user-use-workday"]?(CountdownWorkday(),$("#workday-checkbox").prop("checked",!0)):CountdownDay()}),CountdownMonthYear(),setInterval(GetTime,1e3),setInterval(CountdownDay,9e5),SetColors(),chrome.storage.sync.get("update-20151231",function(o){o["update-20151231"]||($("#update-footer").fadeIn(500).fadeOut(500).fadeIn(500),chrome.storage.sync.set({"update-20151231":!0}))}),$("#update-hide").click(function(o){$("#update-footer").hide(),chrome.storage.sync.set({"update-20151231":!0})}),chrome.storage.sync.get(["user-workday-start","user-workday-end"],function(o){workdayStart=o["user-workday-start"]?o["user-workday-start"]:"09:00",workdayEnd=o["user-workday-end"]?o["user-workday-end"]:"18:00",$("#workday-start-timeinput")[0].value=workdayStart,$("#workday-end-timeinput")[0].value=workdayEnd}),$(".edit-priorities-link").click(function(o){$(".edit-priorities").each(function(o){$(this).hide(),$(this).siblings(".edit-priorities-link").fadeIn()}),$(this).hide(),prioritiesList=$(this).siblings(".edit-priorities")[0],$(prioritiesList).fadeIn(),$(prioritiesList).find("input.todo").focus()}),$(".hide-edit").click(function(o){$(this).parent().hide(),$(this).parent().siblings(".edit-priorities-link").show()}),$("#info-corner").hover(function(){$(this).children("#info-button").hide(),$(this).children("#info").fadeIn()},function(){$(this).children("#info").hide(),$(this).children("#info-button").fadeIn()}),$("#customize-button").click(function(){$("#customize-button").hide(),$("#customize-selectors").fadeIn()}),$("#hide-customize-selectors").click(function(){$("#customize-selectors").hide(),$("#customize-button").fadeIn()}),$("#background-color-selector").colpick({layout:"full",submit:!1,colorScheme:"dark",color:"#222222",onChange:function(o,e,t,r,n){SetColorProperty("main-bgcolor","background-color","#"+e),chrome.storage.sync.set({"user-background-color":"#"+e})},onHide:function(o){$(".color-selector-label").css("visibility","visible"),$(".color-selector-label").css("font-weight","normal")}}),$("#font-color-selector").colpick({layout:"full",submit:!1,colorScheme:"dark",color:"#FFFFFF",onChange:function(o,e,t,r,n){SetColorProperty("main-font-color","color","#"+e),SetColorProperty("main-border-color","color","#"+e),chrome.storage.sync.set({"user-font-color":"#"+e})},onHide:function(o){$(".color-selector-label").css("visibility","visible"),$(".color-selector-label").css("font-weight","normal")}}),$("#shadow-color-selector").colpick({layout:"full",submit:!1,colorScheme:"dark",color:"rgba(255, 255, 255, 0.3)",onChange:function(o,e,t,r,n){SetColorProperty("shadow-color","color","#"+e),SetColorProperty("shadow-border-color","color","#"+e),chrome.storage.sync.set({"user-shadow-color":"#"+e})},onHide:function(o){$(".color-selector-label").css("visibility","visible"),$(".color-selector-label").css("font-weight","normal")}}),$(".customize-selector-label").click(function(o){$(this).siblings(".color-selector-label").css("visibility","hidden"),$(this).show(),$(this).css("font-weight","bold")}),$("#restore-default-colors").click(function(o){SetColorProperty("main-bgcolor","background-color","#222222"),chrome.storage.sync.set({"user-background-color":"#222222"}),SetColorProperty("main-font-color","color","white"),SetColorProperty("main-border-color","color","white"),chrome.storage.sync.set({"user-font-color":"white"}),SetColorProperty("shadow-color","color","rgba(255, 255, 255, 0.3)"),SetColorProperty("shadow-border-color","color","rgba(255, 255, 255, 0.3)"),chrome.storage.sync.set({"user-shadow-color":"rgba(255, 255, 255, 0.3)"})}),$("#workday-checkbox").click(function(o){CheckDayCountdown()}),$("#workday-time-save").click(function(o){var e=$("#workday-start-timeinput")[0].value,t=$("#workday-end-timeinput")[0].value;chrome.storage.sync.set({"user-workday-start":e,"user-workday-end":t}),CheckDayCountdown()}),$("#date-time-format-save").click(function(o){dateFormat=$("#date-format-input option:selected").text(),timeFormat=$("#time-format-input option:selected").text(),chrome.storage.sync.set({"user-time-format":timeFormat}),chrome.storage.sync.set({"user-date-format":dateFormat}),GetDate(),GetTime()}),$("#uninstall-extension-button").click(function(o){chrome.management.uninstallSelf({showConfirmDialog:!0})}),$("#toggle-corner").click(function(o){showCompletionPercent=!showCompletionPercent,chrome.storage.sync.set({"completion-toggle":showCompletionPercent}),ToggleCompletionElements()})};